{% extends "base.html" %}
{% block content %}

<!-- Main container with padding to avoid fixed navbar -->
<div class="container mt-5 pt-5">

    <!-- Page Title -->
    <div class="text-center mb-4">
        <h3 class="fw-bold">AI Resume Optimization</h3>
        <p class="text-muted">Enhance your resume to match your target job description</p>
    </div>

    <!-- QUOTA DISPLAY -->
    <div class="alert alert-info text-center">
        <strong>Remaining Runs This Month:</strong>
        {{ quota.remaining_runs }}/{{ quota.total_runs }}
    </div>

    <!-- FORM CARD -->
    <div class="card shadow-sm p-4 mb-4">
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}

            <!-- Resume Upload -->
            <div class="mb-3">
                <label class="form-label fw-semibold">Upload Resume</label>
                <input type="file" name="resume" class="form-control" required>
            </div>

            <!-- Target Job Description -->
            <div class="mb-3">
                <label class="form-label fw-semibold">Target Job Description</label>
                <textarea name="job_description" class="form-control" rows="5" placeholder="Paste the job description here..." required></textarea>
            </div>

            <!-- Submit Button -->
            <div class="d-grid">
                <button type="submit" class="btn btn-success btn-lg">
                    Optimize Resume
                </button>
            </div>
        </form>
    </div>

    <!-- RESULT CARD -->
    {% if suggestions %}
    <div class="card shadow-sm p-4">
        <h5 class="fw-bold mb-3">AI Suggestions</h5>
        <p class="mb-0">{{ suggestions|linebreaks }}</p>
    </div>
    {% endif %}

</div>

<!-- Optional: Extra bottom padding so result doesn't touch page bottom -->
<div style="padding-bottom: 50px;"></div>

{% endblock %}
