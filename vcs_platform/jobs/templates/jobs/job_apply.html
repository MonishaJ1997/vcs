 {% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block content %}
<div class="job-apply-page">
<div class="container mt-5 pt-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">

            <!-- Main Card -->
            <div class="card shadow-lg" id="application-card">
                <div class="card-body p-4">
                    <h4 class="fw-bold mb-4">Apply for {{ job.title }}</h4>

{% if limit %}
    <div class="mb-3 p-3 bg-warning bg-opacity-10 border rounded">
        <p class="mb-1">
            You have used {{ used }} of {{ limit }} applications this month.
        </p>
        {% if used >= limit %}
            <a href="{% url 'services' %}" class="btn btn-primary btn-sm mt-2">Upgrade to Pro</a>
        {% endif %}
    </div>
{% endif %}



                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}

                        {% for field in form %}
                            {% if field.name != 'cover_letter' %}
                            <div class="mb-3">
                                <label class="form-label fw-semibold">
                                    {{ field.label }}
                                    {% if field.field.required %}
                                        <span class="text-danger">*</span>
                                    {% endif %}
                                </label>
                                {{ field }}
                                {% if field.errors %}
                                    <div class="text-danger mt-1 small">
                                        {{ field.errors|striptags }}
                                    </div>
                                {% endif %}
                            </div>
                            {% endif %}
                        {% endfor %}

                         <!-- Cover Letter Field -->
            <div class="cover-letter-wrapper mt-3">
                <label class="form-label fw-semibold">
                    {{ form.cover_letter.label }}
                    {% if form.cover_letter.field.required %}
                        <span class="text-danger">*</span>
                    {% endif %}
                </label>
                {{ form.cover_letter }}
                {% if form.cover_letter.errors %}
                    <div class="text-danger mt-1 small">
                        {{ form.cover_letter.errors|striptags }}
                    </div>
                {% endif %}
            </div>
<div class="d-grid mt-4 justify-content-center">
    <button type="submit" class="btn btn-success btn-lg mx-auto">
        Submit Application
    </button>
</div>

                    </form>
                </div>
            </div>

           

        </div>
    </div>
</div>
</div>
<style>

/* ===============================
   JOB APPLY PAGE SCOPED STYLES
   =============================== */

.job-apply-page .card {
    background-color:#ffffff;
    border-radius:20px;
    box-shadow:0 15px 35px rgba(0,0,0,0.08);
}

.job-apply-page .form-control:focus {
    box-shadow:0 0 0 0.2rem rgba(37,99,235,0.25);
    border-color:#2563eb;
}

.job-apply-page .btn-success {
    background-color:#16a34a;
    border:none;
    font-weight:600;
    transition:0.3s ease;
    width:300px;
}

.job-apply-page .btn-success:hover {
    background-color:#13832f;
}

.job-apply-page h4 {
    color:#111827;
}

.job-apply-page .form-label .text-danger {
    font-weight:bold;
    margin-left:4px;
}

.job-apply-page .cover-letter-wrapper {
    padding:20px;
    border-radius:12px;
}

.job-apply-page .cover-letter-wrapper textarea {
    width:100% !important;
    min-height:140px;
    resize:vertical;
    padding:10px;
    border-radius:8px;
    font-size:14px;
}

/* Mobile */
@media (max-width:576px){

.job-apply-page .card-body{
    padding:20px;
}

.job-apply-page h4{
    font-size:1.5rem;
}

.job-apply-page .cover-letter-wrapper{
    margin-left:-15px;
    margin-right:-15px;
    padding:15px;
    margin-bottom:20px;
}

.job-apply-page .cover-letter-wrapper textarea{
    min-height:120px;
}
}

/* Tablet */
@media (max-width:768px){

.job-apply-page .cover-letter-wrapper{
    padding:15px;
    margin-top:15px;
    border-radius:12px;
}

}

</style>

{% endblock %}
